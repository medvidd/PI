<!DOCTYPE html>
<html lang="en-us">
<head> 
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c6485">
    <title>StuManager</title>
    <link rel="stylesheet" href="/PI/style.css">
    <link rel="stylesheet" href="/PI/chat_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind:wght@300;400;500;600;700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="manifest" href="/PI/manifest.json">
</head>
<body>
    <header>
        <div>
            <a title="Home page" href="index.html">
                <img class="logo" src="/PI/images/logo1.png" alt="Logo of StuManager">
                <h1 class="logotext">StuManager</h1>
            </a>
        </div>
        <div style="display: flex; align-items: center;">
            <div class="notification" id="notification" style="display: none;">
                <a href="messages.html">
                    <img class="bell" src="/PI/images/bell1.png" alt="Messages">     
                    <span class="notification-dot"></span>
                </a>
                <div class="bmodal">
                    <div class="message">
                        <img src="/PI/images/account.png" alt="User picture" class="avatar">
                        <div class="message-box">
                            <div class="message-content">
                                <h2>Name Surname</h2>
                                <p>New message received!</p>
                            </div>
                        </div>
                    </div>
                    <div class="message">
                        <img src="/PI/images/account.png" alt="User picture" class="avatar">
                        <div class="message-box">
                            <div class="message-content">
                                <h2>Name Surname</h2>
                                <p>New message received!</p>
                            </div>
                        </div>
                    </div>
                    <div class="message">
                        <img src="/PI/images/account.png" alt="User picture" class="avatar">
                        <div class="message-box">
                            <div class="message-content">
                                <h2>Name Surname</h2>
                                <p>New message received!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="autorization" id="loginButton">
                <img class="authorization" src="/PI/images/account.png" alt="User picture" width="50" height="50">
                <h1 class="actext">Authorization</h1> 
            </div>
            <div class="account" id="account" style="display: none;">
                <img class="account" src="/PI/images/account.png" alt="User picture" width="50" height="50">
                <h1 class="actext" id="usernameDisplay">Name Surname</h1> 
                <div class="modal">
                    <a href="profile.html">Profile</a>
                    <a href="#" id="logoutButton">Log Out</a>
                </div>
            </div>
        </div> 
    </header>
    <div class="modal-login" id="modalLogin" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Authorize</h2>
                <span id="closeLoginModal" class="close">×</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                    <label for="password">Password</label>
                    <div style="position: relative;">
                        <input type="password" id="password" name="password" required>
                        <span id="togglePassword" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
                            <i class="fas fa-eye"></i>
                        </span>
                    </div>
                    <span id="loginError" class="error-message" style="display: none;"></span>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="button-cancel" id="cancelLoginBtn">Cancel</button>
                <button type="submit" form="loginForm" class="button-create" id="loginBtn">Login</button>
            </div>
        </div>
    </div>
    <div class="wrapper">
        <nav class="navigation">
            <div class="nav-items">
                <a href="dashboard.html"><h2>Dashboard</h2></a>
                <a href="index.html"><h2>Students</h2></a>
                <a href="tasks.html"><h2>Tasks</h2></a>
            </div>
        </nav>
        <main>
            <div class="main-header">
                <h1>Messanger</h1>
            </div>

            <div class="messages-container">
                <div class="chat-list">
                    <div class="chat-list-header">
                        <h3>Chat rooms</h3>
                        <button class="new-chat-btn" id="newChatBtn">
                            <i class="fas fa-plus"></i> New chat
                        </button>
                    </div>
                    <div class="chat-items" id="chatItems">
                        <div class="chat-item active" data-chat="admin">
                            <div class="chat-avatar">A</div>
                            <div class="chat-info">
                                <div class="chat-name">Admin</div>
                                <p class="chat-preview">Welcome to StuManager!</p>
                                <div class="chat-status status-online">Online</div>
                            </div>
                            <div class="notification-badge" style="display: none;">1</div>
                        </div>
                        <div class="chat-item" data-chat="john">
                            <div class="chat-avatar">J</div>
                            <div class="chat-info">
                                <div class="chat-name">John Smith</div>
                                <p class="chat-preview">How are you doing?</p>
                                <div class="chat-status status-offline">Offline</div>
                            </div>
                        </div>
                        <div class="chat-item" data-chat="ann">
                            <div class="chat-avatar">A</div>
                            <div class="chat-info">
                                <div class="chat-name">Ann Johnson</div>
                                <p class="chat-preview">See you tomorrow!</p>
                                <div class="chat-status status-online">Online</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-window">
                    <div class="chat-header">
                        <h3 class="chat-title" id="chatTitle">Admin</h3>
                        <div class="chat-actions">
                            <button class="chat-action-btn" id="addMembersBtn" title="Add members">
                                <i class="fas fa-user-plus"></i>
                            </button>
                            <button class="chat-action-btn" id="chatInfoBtn" title="Chat info">
                                <i class="fas fa-info-circle"></i>
                            </button>
                        </div>
                    </div>

                    <div class="messages-area" id="messagesArea">
                        <div class="message">
                            <div class="message-avatar">A</div>
                            <div class="message-content">
                                <div class="message-bubble">
                                    Welcome to StuManager messaging system! You can now communicate with students and colleagues.
                                </div>
                                <div class="message-info">
                                    <span>Admin</span>
                                    <span>•</span>
                                    <span>12:30 PM</span>
                                    <span class="status-online">Online</span>
                                </div>
                            </div>
                        </div>

                        <div class="message own">
                            <div class="message-avatar">M</div>
                            <div class="message-content">
                                <div class="message-bubble">
                                    Thank you! This looks great.
                                </div>
                                <div class="message-info">
                                    <span>12:31 PM</span>
                                    <span>•</span>
                                    <span>You</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="message-input-area">
                        <div class="message-input-container">
                            <input type="text" class="message-input" id="messageInput" placeholder="Type a message...">
                            <button class="send-btn" id="sendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="cmodal-overlay" id="newChatModal" style="display: none;">
        <div class="cmodal-content">
            <div class="cmodal-header">
                <h2>Create New Chat</h2>
                <span class="cclose" id="closeNewChatModal">&times;</span>
            </div>
            <div class="cmodal-body">
                <div class="chat-type-selector">
                    <div class="chat-type-option selected" data-type="individual">
                        <i class="fas fa-user"></i>
                        <span>Individual</span>
                    </div>
                    <div class="chat-type-option" data-type="group">
                        <i class="fas fa-users"></i>
                        <span>Group</span>
                    </div>
                </div>

                <div class="form-group" id="chatNameGroup" style="display: none;">
                    <label for="chatName">Chat Name:</label>
                    <input type="text" id="chatName" placeholder="Enter chat name">
                </div>

                <div class="form-group">
                    <label>Select Students:</label>
                    <div class="search-box">
                        <input type="text" id="studentSearch" placeholder="Search students...">
                    </div>
                    <div class="selected-count" id="selectedCount" style="display: none;">
                        Selected: 0 students
                    </div>
                    <div class="student-list" id="studentList">
                        <div class="student-item" data-id="1">
                            <input type="checkbox" id="student1">
                            <div class="student-info">
                                <div class="student-name">John Smith</div>
                                <div class="student-group">Group A</div>
                            </div>
                            <div class="student-avatar">J</div>
                        </div>
                        <div class="student-item" data-id="2">
                            <input type="checkbox" id="student2">
                            <div class="student-info">
                                <div class="student-name">Ann Johnson</div>
                                <div class="student-group">Group B</div>
                            </div>
                            <div class="student-avatar">A</div>
                        </div>
                        <div class="student-item" data-id="3">
                            <input type="checkbox" id="student3">
                            <div class="student-info">
                                <div class="student-name">Mike Davis</div>
                                <div class="student-group">Group A</div>
                            </div>
                            <div class="student-avatar">M</div>
                        </div>
                        <div class="student-item" data-id="4">
                            <input type="checkbox" id="student4">
                            <div class="student-info">
                                <div class="student-name">Sarah Wilson</div>
                                <div class="student-group">Group C</div>
                            </div>
                            <div class="student-avatar">S</div>
                        </div>
                        <div class="student-item" data-id="5">
                            <input type="checkbox" id="student5">
                            <div class="student-info">
                                <div class="student-name">David Brown</div>
                                <div class="student-group">Group B</div>
                            </div>
                            <div class="student-avatar">D</div>
                        </div>
                        <div class="student-item" data-id="6">
                            <input type="checkbox" id="student6">
                            <div class="student-info">
                                <div class="student-name">Emma Taylor</div>
                                <div class="student-group">Group A</div>
                            </div>
                            <div class="student-avatar">E</div>
                        </div>
                    </div>
                </div>

                <div class="cmodal-footer">
                    <button class="cbutton-cancel" id="cancelNewChatBtn">Cancel</button>
                    <button class="cbutton-create" id="createChatBtn" disabled>Create Chat</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальне вікно додавання учасників -->
    <div class="cmodal-overlay" id="addMembersModal" style="display: none;">
        <div class="cmodal-content">
            <div class="cmodal-header">
                <h2>Add Members</h2>
                <span class="cclose" id="closeAddMembersModal">&times;</span>
            </div>
            <div class="cmodal-body">
                <div class="form-group">
                    <label>Select Students to Add:</label>
                    <div class="search-box">
                        <input type="text" id="addMemberSearch" placeholder="Search students...">
                    </div>
                    <div class="selected-count" id="addMemberSelectedCount" style="display: none;">
                        Selected: 0 students
                    </div>
                    <div class="student-list" id="addMembersList">
                        <div class="student-item" data-id="7">
                            <input type="checkbox" id="addStudent7">
                            <div class="student-info">
                                <div class="student-name">Alex Thompson</div>
                                <div class="student-group">Group C</div>
                            </div>
                            <div class="student-avatar">A</div>
                        </div>
                        <div class="student-item" data-id="8">
                            <input type="checkbox" id="addStudent8">
                            <div class="student-info">
                                <div class="student-name">Lisa White</div>
                                <div class="student-group">Group B</div>
                            </div>
                            <div class="student-avatar">L</div>
                        </div>
                        <div class="student-item" data-id="9">
                            <input type="checkbox" id="addStudent9">
                            <div class="student-info">
                                <div class="student-name">Ryan Miller</div>
                                <div class="student-group">Group A</div>
                            </div>
                            <div class="student-avatar">R</div>
                        </div>
                    </div>
                </div>

                <div class="cmodal-footer">
                    <button class="cbutton-cancel" id="cancelAddMembersBtn">Cancel</button>
                    <button class="cbutton-create" id="addMembersBtn" disabled>Add Members</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальне вікно інформації про чат -->
    <div class="cmodal-overlay" id="chatInfoModal" style="display: none;">
        <div class="cmodal-content">
            <div class="cmodal-header">
                <h2>Chat Information</h2>
                <span class="cclose" id="closeChatInfoModal">&times;</span>
            </div>
            <div class="cmodal-body">
                <div class="form-group">
                    <label>Chat Name:</label>
                    <input type="text" id="editChatName" placeholder="Chat name">
                </div>

                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="chatDescription" placeholder="Chat description (optional)"></textarea>
                </div>

                <div class="form-group">
                    <label>Members:</label>
                    <div class="student-list" id="chatMembersList">
                        <div class="student-item">
                            <div class="student-info">
                                <div class="student-name">Admin</div>
                                <div class="student-group">Administrator</div>
                            </div>
                            <div class="student-avatar">A</div>
                        </div>
                        <div class="student-item">
                            <div class="student-info">
                                <div class="student-name">John Smith</div>
                                <div class="student-group">Group A</div>
                            </div>
                            <div class="student-avatar">J</div>
                        </div>
                    </div>
                </div>

                <div class="cmodal-footer">
                    <button class="cbutton-cancel" id="cancelChatInfoBtn">Cancel</button>
                    <button class="cbutton-create" id="saveChatInfoBtn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/PI/script.js" defer></script>
    <script src="/PI/chat_script.js" defer></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9450374e29a622f5',t:'MTc0ODEyNTYwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>